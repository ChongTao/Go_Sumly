Cobra 提供了一种简单而强大的方式来构建命令行客户端，它能够帮助开发者快速实现复杂的命令行工具，并且提供了丰富的功能和选项，包括自动生成帮助文档、自动补全等。

Cobra 是基于命令（`commands`）、参数（`arguments` ）、选项（`flags`）而创建的。

- **commands**：命令代表行为,一般表示 action，即运行的二进制命令服务。同时可以拥有子命令（children commands）

- **arguments**：参数代表命令行参数。

- **flags**：选项代表对命令行为的改变，即命令行选项。二进制命令的配置参数，可对应配置文件。参数可分为全局参数和子命令参数。

## 1 实战

1. Cobra安装

   使用go get命令下载Cobra库

   ```go
   go get -u github.com/spf13/cobra/cobra
   ```

2. 工程初始化

   Cobra提供代码生成器功能，使用Cobra提供的初始化命令cobra init创建Cobra命令。

   ```sh
   cobra init --pkg-name
   ```

   初始化后结构如下：

   ```html
   ├── cmd
   │   ├── root.go
   │   └── show.go
   ├── go.mod
   ├── go.sum
   └── main.go
   ```

3. 运行

   ```cmd
   go run
   ```

4. 实战

   添加show命令，通过命令cobra add show。在show.go文件中

   ```go
   var showCmd = &cobra.Command{
   	Use:   "show",        // 用于指定具体的命令
   	Short: "A brief description of your command",  // 简述描述
   	Long: `A longer description that spans multiple lines and likely contains examples
   and usage of using your command. For example:
   Cobra is a CLI library for Go that empowers applications.
   This application is a tool to generate the needed files
   to quickly create a Cobra application.`,    // 详细描述
       Run: func(cmd *cobra.Command, args []string) {         // 命令执行入口，用于实现命令的具体处理逻辑
           fmt.Println("show called")
       },
   }
   
   func init() {
       rootCmd.AddCommand(showCmd)   // 命令添加，将命令添加到根命令中
       // Here you will define your flags and configuration settings.
       // Cobra supports Persistent Flags which will work for this command
       // and all subcommands, e.g.:
       // showCmd.PersistentFlags().String("foo", "", "A help for foo")
       // Cobra supports local flags which will only run when this command
       // is called directly, e.g.:
       // showCmd.Flags().BoolP("toggle", "t", false, "Help message for toggle")
   }
   ```

   

```go


func init() {
	rootCmd.PersistentFlags().String("version", "", "版本")
}
 
func Execute() {
	cobra.CheckErr(rootCmd.Execute())
}
```

